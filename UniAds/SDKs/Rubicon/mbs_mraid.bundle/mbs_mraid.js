(function(){var a=/(ipad|iphone|ipod)/g.test(window.navigator.userAgent.toLowerCase());if(a){console={};console.log=function(c){var b=document.createElement("iframe");b.setAttribute("src","ios-log:#iOS#"+c);document.documentElement.appendChild(b);b.parentNode.removeChild(b);b=null};console.debug=console.log;console.info=console.log;console.warn=console.log;console.error=console.log}})();(function(){var c=window.mrdbridge={};var a={};var d=[];var b=false;c.fireChangeEvent=function(g){var h=a.change;if(h!=null){for(var f=0;f<h.length;f++){h[f](g)}}};c.fireErrorEvent=function(h,g){var e=a.error;if(e!=null){for(var f=0;f<e.length;f++){e[f](h,g)}}c.nativeCallComplete(g)};c.fireReadyEvent=function(){var f=a.ready;if(f!=null){for(var g=0;g<f.length;g++){f[g]()}}};c.nativeCallComplete=function(g){if(d.length==0){b=false;return}var f=d.pop();window.location=f};c.executeNativeCall=function(j){var g="mraid://"+j;var f;var h=true;for(var k=1;k<arguments.length;k+=2){f=arguments[k+1];if(f==null){continue}if(h){g+="?";h=false}else{g+="&"}g+=arguments[k]+"="+escape(f)}if(b){d.push(g)}else{b=true;window.location=g}};c.addEventListener=function(h,j){var g=a[h];if(g==null){a[h]=[];g=a[h]}for(var f in g){if(j==f){return}}g.push(j)};c.removeEventListener=function(h,j){var g=a[h];if(g!=null){var f=handler.indexOf(h);if(f!=-1){g.splice(f,1)}}}})();(function(){var ak=window.mraid={};var ac=window.mrdbridge;var Y=ak.STATES={LOADING:"loading",DEFAULT:"default",EXPANDED:"expanded",RESIZED:"resized",HIDDEN:"hidden"};var ag=ak.EVENTS={READY:"ready",ERROR:"error",INFO:"info",STATECHANGE:"stateChange",VIEWABLECHANGE:"viewableChange",SIZECHANGE:"sizeChange"};var W=ak.PLACEMENTS={UNKNOWN:"unknown",INLINE:"inline",INTERSTITIAL:"interstitial"};var ab=ak.VERSION="2.0";var R={width:0,height:0,useCustomClose:false,isModal:true,lockOrientation:false,useBackground:false,backgroundColor:0,backrgoundOpacity:0.6};var ao={width:0,height:0,offsetX:0,offsetY:0,customClosePosition:"top-right",allowOffscreen:true};var aj=["top-left","top-right","center","bottom-left","bottom-right","top-center","bottom-center"];var ae=false;var am=false;var ah=false;var aa=Y.LOADING;var al=W.UNKNOWN;var Q={width:0,height:0};var ad={sms:false,tel:false,calendar:false,storePicture:false,inlineVideo:false};var ai={width:0,height:0};var I={x:0,y:0,width:0,height:0};var an={x:0,y:0,width:0,height:0};var K={width:0,height:0};var U={};var q=function(b){this.event=b;this.count=0;var a={};this.add=function(c){var d=String(c);if(!a[d]){a[d]=c;this.count++}};this.remove=function(c){var d=String(c);if(a[d]){a[d]=null;delete a[d];this.count--;return true}else{return false}};this.removeAll=function(){for(var c in a){if(a.hasOwnProperty(c)){this.remove(a[c])}}};this.broadcast=function(c){for(var d in a){if(a.hasOwnProperty(d)){}a[d].apply({},c)}};this.toString=function(){var d=[b,":"];for(var c in a){if(a.hasOwnProperty(c)){}d.push("|",c,"|")}return d.join("")}};var J=function(b){if(b==null){return null}var a=function(){};a.prototype=b;return new a};var j=function(b){if(typeof b=="object"){if(b.push){var a=[];for(var c=0;c<b.length;c++){a.push(b[c])}return"["+a.join(",")+"]"}else{var a=[];for(var c in b){a.push("'"+c+"':"+b[c])}return"{"+a.join(",")+"}"}}else{return String(b)}};var F=function(d,g,c,b){if(b){if(d==undefined){af(ag.ERROR,"Required object missing.",c);return false}else{for(var f in g){if(g.hasOwnProperty(f)&&d[f]==undefined){t(ag.ERROR,"Object missing required property "+f,c);return false}}}}for(var a in d){if(!g[a]){af(ag.ERROR,"Invalid property specified - "+a+".",c);return false}else{if(!g[a](d[a])){af(ag.ERROR,"Value of property "+a+" is not valid type.",c);return false}}}return true};var X=function(b,a){for(var c in a){if(a[c]==b){return true}}return false};var af=function(){var b=new Array(arguments.length);for(var a=0;a<arguments.length;a++){b[a]=arguments[a]}var c=b.shift();if(U[c]){U[c].broadcast(b)}};var H={state:function(a){if(aa==Y.LOADING){af(ag.INFO,"SDK initialized")}af(ag.INFO,"setting state to "+j(a));aa=a;af(ag.STATECHANGE,aa)},expandProperties:function(b){af(ag.INFO,"merging expandProperties with "+j(b));for(var a in b){if(b.hasOwnProperty(a)){R[a]=b[a]}}},resizeProperties:function(b){af(ag.INFO,"merging resizeProperties with "+j(b));for(var a in b){if(b.hasOwnProperty(a)){ao[a]=b[a]}}},screenSize:function(b){af(ag.INFO,"setting screenSize to "+j(b));for(var a in b){if(b.hasOwnProperty(a)){ai[a]=b[a]}}if(!ah){R.width=ai.width;R.height=ai.height}},viewable:function(a){ae=a;af(ag.INFO,"setting viewable to "+j(a));af(ag.VIEWABLECHANGE,ae)},placementType:function(a){af(ag.INFO,"setting placement to "+j(a));al=a},currentPosition:function(a){af(ag.INFO,"setting current position to "+j(a));I=a},defaultPosition:function(a){af(ag.INFO,"setting default position to "+j(a));an=a},size:function(a){af(ag.INFO,"setting size to "+j(a));Q=a;af(ag.SIZECHANGE,Q)},maxSize:function(a){af(ag.INFO,"setting maxSize to "+j(a));K=a},supports:function(b){af(ag.INFO,"setting supports to "+j(b));for(var a in b){if(b.hasOwnProperty(a)){ad[a]=b[a]}}}};var Z={lockOrientation:function(a){return a==true||a==false},useCustomClose:function(a){return a==true||a==false},width:function(a){return !isNaN(a)&&a>=0},height:function(a){return !isNaN(a)&&a>=0}};var B={width:function(a){return !isNaN(a)&&a>=0},height:function(a){return !isNaN(a)&&a>=0},offsetX:function(a){return !isNaN(a)},offsetY:function(a){return !isNaN(a)},customClosePosition:function(a){return X(a,aj)},allowOffscreen:function(a){return a==true||a==false}};ac.addEventListener("change",function(b){for(var a in b){var c=H[a];c(b[a])}});ac.addEventListener("error",function(b,a){af(ag.ERROR,b,a)});ac.addEventListener("ready",function(){af(ag.READY)});ak.addEventListener=function(b,a){if(!b||!a){af(ag.ERROR,"Both event and listener are required.","addEventListener")}else{if(!X(b,ag)){af(ag.ERROR,"Unknown event: "+b,"addEventListener")}else{if(!U[b]){U[b]=new q(b)}U[b].add(a)}}};ak.removeEventListener=function(b,a){if(!b){af(ag.ERROR,"Must specify an event.","removeEventListener")}else{if(a&&(!U[b]||!U[b].remove(a))){af(ag.ERROR,"Listener not currently registered for event","removeEventListener");return}else{if(U&&U[b]){U[b].removeAll()}else{af(ag.ERROR,"Listener not currently registered for event","removeEventListener");return}}if(U&&U[b]&&U[b].count==0){U[b]=null;delete U[b]}}};ak.getPlacementType=function(){return al};ak.getState=function(){return aa};ak.getVersion=function(){return ak.VERSION};ak.isViewable=function(){return ae};ak.getCurrentPosition=function(){return I};ak.getDefaultPosition=function(){return an};ak.getMaxSize=function(){return K};ak.getScreenSize=function(){return ai};ak.close=function(){ac.executeNativeCall("close")};ak.useCustomClose=function(a){R.useCustomClose=a;am=true;ac.executeNativeCall("usecustomclose","shouldUseCustomClose",a)};ak.open=function(a){if(!a){af(ag.ERROR,"URL is required.","open")}else{ac.executeNativeCall("open","url",a)}};ak.expand=function(b){if(al!=W.INTERSTITIAL&&(aa==Y.DEFAULT||aa==Y.RESIZED)){af(ag.INFO,"expanding");var a=["w",R.width,"h",R.height];if(b){a=a.concat(["url",b])}a=a.concat(["shouldUseCustomClose",R.useCustomClose?"true":"false"]);a=a.concat(["lockOrientation",R.lockOrientation]);ac.executeNativeCall.apply(this,["expand"].concat(a))}else{af(ag.INFO,"cannot expand when state is "+j(aa)+" or placement is "+j(al))}};ak.getExpandProperties=function(){return J(R)};ak.setExpandProperties=function(c){if(F(c,Z,"setExpandProperties",false)){if(c.hasOwnProperty("useCustomClose")){am=true}if(c.hasOwnProperty("width")||c.hasOwnProperty("height")){hasSetCustomSizes=true}var a=["width","height","useCustomClose","lockOrientation"];for(var d=0;d<a.length;d++){var b=a[d];if(c.hasOwnProperty(b)){R[b]=c[b]}}}};ak.getOrientationProperties=function(){af(ag.ERROR,"getOrientationProperties not implemented")};ak.setOrientationProperties=function(a){af(ag.ERROR,"setOrientationProperties not implemented")};ak.resize=function(){if(al!=W.INTERSTITIAL&&(aa==Y.DEFAULT||aa==Y.RESIZED)){af(ag.INFO,"resizing");var a=["w",ao.width,"h",ao.height,"offX",ao.offsetX,"offY",ao.offsetY];a=a.concat(["offScr",ao.allowOffscreen?"true":"false"]);a=a.concat(["ccPos",ao.customClosePosition]);ac.executeNativeCall.apply(this,["resize"].concat(a))}else{if(aa==Y.EXPANDED){af(ag.ERROR,"cannot resize when state is "+j(aa),"resize")}else{af(ag.INFO,"cannot expand when state is "+j(aa)+" or placement is "+j(al))}}};ak.getResizeProperties=function(){return J(ao)};ak.setResizeProperties=function(c){if(F(c,B,"setResizeProperties",false)){var a=["width","height","offsetX","offsetY","customClosePosition","allowOffscreen"];for(var d=0;d<a.length;d++){var b=a[d];if(c.hasOwnProperty(b)){ao[b]=c[b]}}}};ak.getOrientationProperties;ak.playVideo=function(a){if(!a){af(ag.ERROR,"uri is required","playVideo")}else{ac.executeNativeCall("playVideo","uri",a)}};ak.storePicture=function(a){if(!a){af(ag.ERROR,"uri is required","storePicture")}else{ac.executeNativeCall("storePicture","uri",a)}};ak.supports=function(a){if(!a){af(ag.ERROR,"method is required","supports")}else{if(ad[a]){return true}else{return false}}};var G=function(b){var a=["opaque","transparent"];return X(val,a)};var ap=function(b){var a=1;if(b.hasOwnProperty("interval")){a=b.interval}return a};var V=function(b){if(b.hasOwnProperty("frequency")){var a=b.frequency;var c=["daily","weekly","monthly","yearly"];if(X(a,c)){return true}}return false};var z=function(b){if(b.hasOwnProperty("expires")){var a=b.expires;if(a){return true}}return false};ak.createCalendarEvent=function(k){if(!k){af(ag.ERROR,"parameters object is required","createCalendarEvent")}else{var d=[];for(key in k){if(key=="transparency"){if(!G(k[key])){af(ag.ERROR,"invalid transparency value","createCalendarEvent");return}else{d.push(key);d.push(k[key])}}else{if(key=="recurrence"){var h=k[key];var g=ap(h);if(g){d.push("interval");d.push(g)}else{af(ag.ERROR,"invalid interval value","createCalendarEvent");return}if(V(h)){d.push("frequency");d.push(h.frequency)}else{af(ag.ERROR,"invalid frequency value","createCalendarEvent");return}if(z(h)){d.push("expires");d.push(h.expires)}else{af(ag.ERROR,"invalid recurrence expires value","createCalendarEvent");return}if(h.hasOwnProperty("daysInWeek")){var l=h.daysInWeek;if(l&&l instanceof Array){d.push("daysInWeek");d.push(l.join(","))}else{af(ag.ERROR,"invalid daysInWeek  value","createCalendarEvent");return}}if(h.hasOwnProperty("daysInMonth")){var c=h.daysInMonth;if(c&&c instanceof Array){d.push("daysInMonth");d.push(c.join(","))}else{af(ag.ERROR,"invalid daysInMonth  value","createCalendarEvent");return}}if(h.hasOwnProperty("daysInYear")){var b=h.daysInYear;if(b&&b instanceof Array){d.push("daysInYear");d.push(b.join(","))}else{af(ag.ERROR,"invalid daysInYear  value","createCalendarEvent");return}}if(h.hasOwnProperty("monthsInYear")){var i=h.monthsInYear;if(i&&i instanceof Array){d.push("monthsInYear");d.push(i.join(","))}else{af(ag.ERROR,"invalid monthsInYear  value","createCalendarEvent");return}}}else{d.push(key);d.push(k[key])}}}ac.executeNativeCall.apply(this,["createCalendarEvent"].concat(d))}}})();